<Page
    x:Class="Tiny_GymBook.Presentation.PlanDetail"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">

    <Grid x:Name="RootGrid">
        <ScrollViewer>
            <ItemsControl ItemsSource="{Binding GruppierteEintraege}">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Margin="0,16,0,0">
                            <!-- Tag-Überschrift -->
                            <TextBlock Text="{Binding Key}"
                                    FontSize="20"
                                    FontWeight="Bold"/>
                            <ItemsControl ItemsSource="{Binding}">
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <TextBlock Text="{Binding Uebung.Name}"
                                                FontSize="16"
                                                Margin="12,0,0,0"/>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                            <!-- Button für diesen Tag -->
                            <Button Content="Übung hinzufügen"
                                    Command="{Binding DataContext.AddUebungToTagCommand, ElementName=RootGrid}"
                                    CommandParameter="{Binding Key}"/>
                        </StackPanel>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </ScrollViewer>

        <StackPanel Grid.Row="1"
                Orientation="Horizontal"
                HorizontalAlignment="Center">
            <Button Content="Tag hinzufügen"
                    Command="{Binding AddTagCommand}"/>
            <Button Content="Zurück"
                    Command="{Binding BackCommand}"/>
        </StackPanel>
    </Grid>

</Page>
